<!DOCTYPE html>
<html>
<head>
    <meta charset = "ISO-8859-1" />
    <link href = "css/styles.css" rel = "stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>Employee Management</title>
</head>
<script th:inline="javascript" th:src="@{/js/script.js}" >
</script>
<body>
<nav class="navbar navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">
            <img th:src="@{/img/logo.png}" alt="" width="40" height="40" class="d-inline-block align-text-top">
            Carlcare INC.
        </a>
        <div class="d-flex row">
            <img src="https://static.vecteezy.com/system/resources/thumbnails/006/184/737/small/logout-sign-out-icon-in-line-style-vector.jpg" width="40" height="40"/>
                <h5> Logout </h5>
        </div>
    </div>
</nav>
<button class="btn btn-info my-4" type="button"><a href="/addEmployee">Add new employeeEntity</a></button></a>
<table th:switch="${#lists.size(employeeEntities)}" class="table table-bordered table-striped" id="employeeTable">
         <span th:case="0">
         we have no employeeEntities
         </span>
    <span th:case="*">
            <div>
               <form th:action="@{/employee}" id="employeeForm"  method="get">
                     <select id="criteria" class="form-select" aria-label="Default select example" name="sortBy" th:value="${criteria}"  >
                        <option value="null" selected>not specified</option>
                        <option value="firstName">firstName</option>
                        <option value="lastName">lastName</option>
                        <option value="sex">Sex</option>
                        <option value="hireDate">hire Date</option>
                        <option value="departureDate">departure Date </option>
                        <option value="jobFunction">Job Function </option>
                     </select>
                     <select name="sortOrder" class="form-select" aria-label="Default select example" th:value="${sortOrder}" id="sortOrder">
                        <option value="null" selected>not specified</option>
                        <option value="ASC">ASC</option>
                        <option value="DESC">DESC</option>
                     </select>
                  <label for="firstName"> firstName </label>
                        <input type="text" name="firstName" id="firstName"  th:value="${firstName}" placeholder="search by firstNam">

                  <input type="text" name="code"  th:value="${code}" placeholder="search by lastName">
                    <input type="text" name="lastName"  th:value="${lastName}" placeholder="search by lastName">
                  <input type="text" name="jobFunction"  th:value="${jobFunction}" placeholder="search by Job Function">
                  <input type="date" name="entrance"  th:value="${hireDate}" >
                  <input type="date" name="departure"  th:value="${departureDate}">
                  <select name="sex" th:value="${sex}"  id="sex">
                     <option value="null" id="not_specified">not specified</option>
                     <option value="M">M</option>
                     <option value="F">F</option>
                  </select>
                  <button type="submit" class="btn btn-info"   onclick="submitForm()" >Rechercher</button>
               </form>
                <a id="exportLink" href="#" download="employee_list.csv" style="display: none;">Export CSV</a>
                <button class="btn btn-info" onclick="exportToCSV()" >Export CSV</button>
            </div>
            <thead>
               <tr>
               <tr>
                  <th class="exclude-from-csv">Profile image</th>
                  <th>First Name</th>
                  <th>Last Name</th>
                  <th>Sex</th>
                  <th>Job Function</th>
                  <th>Job hire</th>
                  <th>Job fire</th>
               </tr>
            </thead>
            <tbody>
               <tr th:each="employeeEntity : ${employeeEntities}">
                  <td>
                     <span th:if="${employeeEntity.profileImage== null}">No profile image</span>
                     <span th:unless="${employeeEntity.profileImage== null}" >
                     <img th:src="'data:image/jpeg;base64,' + ${employeeEntity.profileImage}" class="exclude-from-csv" width="80px" height="80px"  alt="image" src="">
                     </span>
                  </td>
                  <td th:text="${employeeEntity.firstName}"></td>
                  <td th:text="${employeeEntity.lastName}"></td>
                  <td th:text="${employeeEntity.sex}"></td>
                  <td th:text="${employeeEntity.firstName}"></td>
                  <td th:text="${employeeEntity.hireDate}"></td>
                  <td th:text="${employeeEntity.departureDate}"></td>
                  <td class="exclude-from-csv">
                     <button class="btn btn-info"  th:onclick="redirectEmployee([[${employeeEntity.id}]])">View employee card</button>
                     <button class="btn btn-info"  th:onclick="redirectEmployeeToEdit([[${employeeEntity.id}]])">Edit</button>
                  </td>
               </tr>
            </tbody>
         </span>
</table>
</body>
</html>